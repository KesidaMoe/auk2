<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—É–∫—Ü–∏–æ–Ω —Å—Ç–∞–≤–æ–∫</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f4f4f4;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #1a73e8;
        }
        .form-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        input, button {
            padding: 12px;
            margin: 10px 0;
            width: 100%;
            font-size: 16px;
        }
        input {
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #1557b0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #1a73e8;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        .winner {
            background: #d4edda !important;
            font-weight: bold;
            font-size: 1.1em;
        }
        .no-bets {
            text-align: center;
            padding: 40px;
            color: #888;
            font-size: 1.2em;
        }
    </style>
</head>
<body>

    <h1>–ê—É–∫—Ü–∏–æ–Ω —Å—Ç–∞–≤–æ–∫</h1>

    <div class="form-container">
        <h2>–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</h2>
        <input type="text" id="nick" placeholder="–¢–≤–æ–π –Ω–∏–∫" required>
        <input type="number" id="amount" placeholder="–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)" min="1" required>
        <button onclick="placeBet()">–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£</button>
    </div>

    <h2>–¢–µ–∫—É—â–∏–µ —Å—Ç–∞–≤–∫–∏</h2>
    <div id="betsTableContainer"></div>

    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞–≤–∫–∏ –∏–∑ LocalStorage
        let bets = JSON.parse(localStorage.getItem('auctionBets') || '[]');

        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Å—É–º–º—ã
        function sortBets() {
            bets.sort((a, b) => b.amount - a.amount);
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ LocalStorage
        function saveBets() {
            localStorage.setItem('auctionBets', JSON.stringify(bets));
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç–∞–≤–∫—É
        function placeBet() {
            const nickInput = document.getElementById('nick');
            const amountInput = document.getElementById('amount');

            const nick = nickInput.value.trim();
            const amount = parseInt(amountInput.value);

            if (!nick || !amount || amount <= 0) {
                alert('–ó–∞–ø–æ–ª–Ω–∏ –Ω–∏–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É!');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–±–∏—Ç—å —Å–≤–æ—é –∂–µ —Å—Ç–∞–≤–∫—É
            const existingIndex = bets.findIndex(b => b.nick.toLowerCase() === nick.toLowerCase());
            if (existingIndex !== -1) {
                if (bets[existingIndex].amount >= amount) {
                    alert('–¢–≤–æ—è –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç–∞–≤–∫–∞ –≤—ã—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞! –î–µ–ª–∞–π –±–æ–ª—å—à–µ.');
                    return;
                }
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞–≤–∫—É
                bets[existingIndex].amount = amount;
                bets[existingIndex].date = new Date().toLocaleString();
            } else {
                // –ù–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞
                bets.push({
                    nick,
                    amount,
                    date: new Date().toLocaleString()
                });
            }

            sortBets();
            saveBets();
            renderTable();

            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            nickInput.value = '';
            amountInput.value = '';
        }

        // –†–µ–Ω–¥–µ—Ä–∏–º —Ç–∞–±–ª–∏—Ü—É
        function renderTable() {
            sortBets();
            const container = document.getElementById('betsTableContainer');

            if (bets.length === 0) {
                container.innerHTML = '<div class="no-bets">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ —Å–¥–µ–ª–∞–ª —Å—Ç–∞–≤–∫—É üò¢<br>–ë—É–¥—å –ø–µ—Ä–≤—ã–º!</div>';
                return;
            }

            let tableHTML = `
                <table>
                    <tr>
                        <th>–ú–µ—Å—Ç–æ</th>
                        <th>–ù–∏–∫</th>
                        <th>–°—É–º–º–∞</th>
                        <th>–í—Ä–µ–º—è</th>
                    </tr>
            `;

            bets.forEach((bet, index) => {
                const rowClass = index === 0 ? 'class="winner"' : '';
                tableHTML += `
                    <tr ${rowClass}>
                        <td>${index + 1}</td>
                        <td>${bet.nick}</td>
                        <td><strong>${bet.amount.toLocaleString()} ‚ÇΩ</strong></td>
                        <td>${bet.date}</td>
                    </tr>
                `;
            });

            tableHTML += `</table>`;
            container.innerHTML = tableHTML;
        }

        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = renderTable;
    </script>

</body>
</html>